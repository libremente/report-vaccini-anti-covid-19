(this["webpackJsonpcovid19-dashboard-vaccini"]=this["webpackJsonpcovid19-dashboard-vaccini"]||[]).push([[0],{15:function(e,t,a){},23:function(e,t,a){},94:function(e,t,a){},98:function(e,t,a){},99:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(1),i=a.n(c),s=a(46),r=a.n(s),o=(a(94),a(5)),l=a(2),d=(a(15),a(41),a(42),a(43),a(44),function(){return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"row m-0",style:{backgroundColor:"#0059b3"},children:[Object(n.jsxs)("div",{className:"col-12 col-md-4 d-flex justify-content-md-center justify-content-sm-start logo-section pt-2 pb-2",children:[Object(n.jsx)("a",{href:"http://www.governo.it",target:"_blank",rel:"noreferrer",children:Object(n.jsx)("img",{src:"logo.svg",height:"4px",alt:"Logo",className:"logo pl-5 pr-2"})}),Object(n.jsx)("p",{className:"pt-sm-0",children:"Presidenza del Consiglio dei Ministri"})]}),Object(n.jsxs)("div",{className:"col-12 col-md-4 d-flex justify-content-md-center justify-content-sm-start logo-section pr-sm-0 pt-2 pb-2",children:[Object(n.jsx)("a",{href:"http://www.governo.it",target:"_blank",rel:"noreferrer",children:Object(n.jsx)("img",{src:"logo.svg",height:"4px",alt:"Logo",className:"logo pl-5 pr-2"})}),Object(n.jsx)("p",{className:"pt-sm-0",children:"Commissario Straordinario Covid-19"})]}),Object(n.jsxs)("div",{className:"col-12 col-md-4 d-flex justify-content-md-center justify-content-sm-start logo-section pt-2 pb-2 pr-sm-3",children:[Object(n.jsx)("a",{href:"http://www.governo.it",target:"_blank",rel:"noreferrer",children:Object(n.jsx)("img",{src:"logo.svg",height:"4px",alt:"Logo",className:"logo pl-5 pr-2"})}),Object(n.jsx)("p",{className:"pt-sm-0",children:"Ministero della Salute"})]}),Object(n.jsx)("div",{className:"col-12 d-flex flex-column justify-content-center mainBanner",children:Object(n.jsxs)("div",{className:"d-flex justify-content-center",children:[Object(n.jsx)("img",{src:"logo.png",alt:"Logo",className:"main-logo"}),Object(n.jsx)("span",{className:"pl-3",children:"Report Vaccini Anti COVID-19"})]})})]})})}),j=function(){return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("div",{className:"footer-wrapper p-4 clearfix",children:Object(n.jsx)("footer",{className:"footer_container container",id:"footer",children:Object(n.jsxs)("div",{className:"row title_row",children:[Object(n.jsxs)("div",{className:"col-md-4 d-flex justify-content-center logo-section pt-1 pb-2",children:[Object(n.jsx)("div",{children:Object(n.jsx)("div",{children:Object(n.jsx)("a",{href:"http://www.governo.it",target:"_blank",rel:"noreferrer",children:Object(n.jsx)("img",{src:"logo.svg",height:"4px",alt:"Logo",className:"logo ml-5 mr-2"})})})}),Object(n.jsx)("div",{children:Object(n.jsx)("p",{children:"Presidenza del Consiglio dei Ministri"})})]}),Object(n.jsxs)("div",{className:"col-md-4 d-flex justify-content-center logo-section pt-1 pb-2",children:[Object(n.jsx)("div",{children:Object(n.jsx)("div",{children:Object(n.jsx)("a",{href:"http://www.governo.it",target:"_blank",rel:"noreferrer",children:Object(n.jsx)("img",{src:"logo.svg",height:"4px",alt:"Logo",className:"logo ml-5 mr-2"})})})}),Object(n.jsx)("div",{children:Object(n.jsx)("p",{children:"Commissario Straordinario Covid-19"})})]}),Object(n.jsxs)("div",{className:"col-md-4 d-flex justify-content-center logo-section pt-1 pb-2",children:[Object(n.jsx)("div",{children:Object(n.jsx)("div",{children:Object(n.jsx)("a",{href:"http://www.governo.it",target:"_blank",rel:"noreferrer",children:Object(n.jsx)("img",{src:"logo.svg",height:"4px",alt:"Logo",className:"logo ml-5 mr-2"})})})}),Object(n.jsx)("div",{children:Object(n.jsx)("p",{children:"Ministero della Salute"})})]})]})})})})},u=a(4),m=a.n(u),h=a(10),p=a(3),b=a(12),g=(a(9),a(6)),x=a.n(g),f=function(e,t){return e+t},v=function(e){return function(t,a){return t+ +(null===a||void 0===a?void 0:a[e])}},O=function(e){return function(t,a){return(null===a||void 0===a?void 0:a[e])>t?null===a||void 0===a?void 0:a[e]:t}},y=["16-19","20-29","30-39","40-49","50-59","60-69","70-79","80-89","90+"],N=function(e){var t;return Array.isArray(e)&&e.length>0&&(t=y.map((function(t){var a=g.sum(e.filter((function(e){return e.fascia_anagrafica===t})).map((function(e){return e.sesso_maschile}))),n=g.sum(e.filter((function(e){return e.fascia_anagrafica===t})).map((function(e){return e.sesso_femminile})));return{fascia_anagrafica:t,sesso_femminile:n,sesso_maschile:a,totale:a+n}}))),t},w=function(e,t){return e.map((function(e){return e[t]}))},_=function(e){return e.reduce(f)},S=function(e){return function(t,a){var n=a[e];return t[n]||(t[n]=[]),t[n].push(a),t}},C=function(e){return function(t){return function(a){return a[e]===t}}},k=C("area"),L=k("ITA"),z=(C("TML_FASCIA_ETA"),function(e){return Object(o.a)(Object(o.a)({},e),{},{area:F[e.area],code:e.area})}),F={ABR:"Abruzzo",BAS:"Basilicata",CAL:"Calabria",CAM:"Campania",EMR:"Emilia-Romagna",FVG:"Friuli Venezia Giulia",LAZ:"Lazio",LIG:"Liguria",LOM:"Lombardia",MAR:"Marche",MOL:"Molise",PAB:"P.A. Bolzano",PAT:"P.A. Trento",PIE:"Piemonte",PUG:"Puglia",SAR:"Sardegna",SIC:"Sicilia",TOS:"Toscana",UMB:"Umbria",VDA:"Valle d'Aosta",VEN:"Veneto"},R=function(e){var t={};for(var a in e)t[e[a]]=a;return t}(F),A=(a(23),function(e){var t=Object(c.useState)([]),a=Object(l.a)(t,2),i=a[0],s=a[1],r=Object(c.useState)(null),o=Object(l.a)(r,2),d=o[0],j=o[1],u=p.c().center([0,41]).rotate([347,0]).parallels([35,45]).scale(2200).translate([249,239]);return Object(c.useEffect)((function(){(function(){var e=Object(h.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("data/geo/it.json");case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,s(b.a(a,a.objects.regions).features);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(n.jsx)("div",{className:"map-area mt-sx-3",children:Object(n.jsx)("svg",{className:"h-100 w-100",height:478,children:Object(n.jsxs)("g",{className:"countries",children:[i.map((function(t,a){var c,i,s=e.summaryFilter||e.summary.deliverySummary,r=null===s||void 0===s?void 0:s.filter(k(t.properties.reg_name)),o={};r&&r.length>0&&(o=r[0]);var l=e&&e.summaryFilter?1/80*o.percentuale_somministrazione:(null===e||void 0===e?void 0:e.selected)===o?1:(null===e||void 0===e?void 0:e.selected)?.01*o.percentuale_somministrazione:1/80*o.percentuale_somministrazione;return Object(n.jsx)("path",{d:p.d().projection(u)(t),className:"country",id:"".concat(null===(c=o)||void 0===c||null===(i=c.area)||void 0===i?void 0:i.trim()),fill:"rgba(0,102,204,".concat(l,") "),stroke:"#FFFFFF",strokeWidth:.7,onClick:function(){return t=o.index,void(d===t?(e.handleCountryClick(null),j(null)):(e.handleCountryClick(t),j(t)));var t},children:Object(n.jsx)("title",{children:Object(n.jsxs)("span",{className:"bg-info",children:[o.area," ",o.percentuale_somministrazione,"%"]})})},"path-".concat(a))})),");"]})})})}),D=function(e){var t=e.handleCountryClick,a=e.selectedCodeCategory,i=e.maxByCategory,s=e.summary,r=e.selected,o=e.categoryRegionSelect,d=e.setCategoryRegionSelect,j=Object(c.useState)([]),u=Object(l.a)(j,2),g=u[0],x=u[1],f=p.c().center([0,41]).rotate([347,0]).parallels([35,45]).scale(2200).translate([249,239]);Object(c.useEffect)((function(){(function(){var e=Object(h.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("data/geo/it.json");case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,x(b.a(a,a.objects.regions).features);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var v=function(e){return a?e.byCategory[a].length&&e.byCategory[a][0].total&&e.byCategory[a][0].total.toLocaleString("it"):e.dosi_somministrate&&e.dosi_somministrate.toLocaleString("it")},O=function(e){var t=a?e.byCategory[a].length&&e.byCategory[a][0].total:e.dosi_somministrate;return r===e?1:r?t/i*100/2*.01:t/i*100*.02};return Object(n.jsx)("div",{className:"map-area mt-2",children:Object(n.jsx)("svg",{className:"h-100 w-100",height:478,children:Object(n.jsxs)("g",{className:"countries",children:[g.map((function(e,a){var c,i=null===s||void 0===s||null===(c=s.deliverySummary)||void 0===c?void 0:c.filter(k(e.properties.reg_name)),r={};return i&&i.length>0&&(r=i[0]),Object(n.jsx)("path",{d:p.d().projection(f)(e),className:"country",fill:"rgba(0,102,204, ".concat(O(r),") "),stroke:"#FFFFFF",strokeWidth:.7,onClick:function(){return e=r.index,void(o===e?(t(null),d(null)):(t(e),d(e)));var e},children:Object(n.jsx)("title",{children:Object(n.jsxs)("span",{className:"bg-info",children:[r.area," ",v(r)]})})},"path-".concat(a))})),");"]})})})},V=function(e){var t=Object(c.useState)([]),a=Object(l.a)(t,2),i=a[0],s=a[1],r=p.c().center([0,41]).rotate([347,0]).parallels([35,45]).scale(2200).translate([249,239]);Object(c.useEffect)((function(){(function(){var e=Object(h.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("data/geo/it.json");case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,s(b.a(a,a.objects.regions).features);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);return Object(n.jsx)("div",{className:"map-area mt-sx-3",children:Object(n.jsx)("svg",{className:"h-100 w-100",height:478,children:Object(n.jsxs)("g",{className:"countries",children:[i.map((function(t,a){var c,i,s,o,l,d=e.summaryFilter||e.summary.locationsByRegion,j=null===d||void 0===d?void 0:d.filter(k(t.properties.reg_name)),u={};return j&&j.length>0&&(u=j[0]),Object(n.jsx)("path",{d:p.d().projection(r)(t),className:"country",id:"".concat(null===(c=u)||void 0===c||null===(i=c.area)||void 0===i?void 0:i.trim()),fill:"rgba(23,50,77,".concat((o=u,l=null===e||void 0===e||null===(s=e.summary)||void 0===s?void 0:s.maxNumberOfLocations,o.area===e.locationRegionSelect?1:e.locationRegionSelect?o.locations/l/2+.1:o.locations/l+.1),") "),stroke:"#FFFFFF",strokeWidth:.7,onClick:function(){return t=u.area,void(e.locationRegionSelect===t?(e.handleCountryClick(null),e.setLocationRegionSelect(null)):(e.handleCountryClick(t),e.setLocationRegionSelect(t)));var t},children:Object(n.jsx)("title",{children:Object(n.jsxs)("span",{className:"bg-info",children:[u.area," ",u.locations]})})},"path-".concat(a))})),");"]})})})},E=function(e){return Object(n.jsx)("div",{className:"d-flex mt-2 p-4 w-100 justify-content-center text-center "+e.classes,children:e.text})},B=a(7),M=a.n(B),P=a(19),I=a.n(P);a(97);M.a.DataTable=I.a;var T=[{title:"Regione",data:"area"},{title:"Provincia",data:"provincia"},{title:"Comune",data:"comune"},{title:"Punto di somministrazione",data:"presidio_ospedaliero"}],Y=function(e){return Object(c.useEffect)((function(){var t,a=e.setLocationTableRef,n=M()("#datatable-locations").find("table").DataTable({dom:"<'row'<'col-sm-12 col-md-6'l><'col-sm-12 col-md-6'>><'row'<'col-sm-12'tr>><'row'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7'p>>",paging:!1,searching:!0,destroy:!0,bLengthChange:!1,info:!1,scrollY:"550px",scrollCollapse:!0,data:(null===(t=e.summary)||void 0===t?void 0:t.locations)||[],columns:T});(null===e||void 0===e?void 0:e.selected)?n.search(e.selected).draw():n.search(" ").draw(),a(n.rows({search:"applied"}).count()/2)})),Object(n.jsx)("div",{id:"datatable-locations",children:Object(n.jsx)("table",{className:"display compact",cellSpacing:"0",width:"100%"})})};a(98);B.DataTable=I.a;var G=[{title:"Regioni",data:"area"},{title:"Vaccinazione",data:"dosi_somministrate"},{title:"Consegne",data:"dosi_consegnate"},{title:"%",data:"percentuale_somministrazione"}],U=function(e){return Object(c.useEffect)((function(){B("#datatable").find("tfoot"),B("#datatable").find("table").append("<tfoot><th></th><th></th><th></th><th></th></tfoot>")}),[]),Object(c.useEffect)((function(){var t,a,n=B("#datatable").find("table").DataTable({dom:"<'row'<'col-12'l>><'row'<'col-12'tr>>",paging:!1,searching:!0,destroy:!0,data:e.summaryFilter||(null===(t=e.summary)||void 0===t?void 0:t.deliverySummary)||[],columns:G,columnDefs:[{targets:0,width:"150px"},{targets:[1,2,3],render:function(e,t,a){return Number(e).toLocaleString("it")}}],footerCallback:function(e,t,a,n,c){var i=B("#datatable").find("table").DataTable(),s=function(e){return"string"===typeof e?1*e.replace(/[$,]/g,""):"number"===typeof e?e:0},r=i.column(3,{search:"applied"}).data().reduce((function(e,t,a,n){var c=n.length;return s(e)+s(t)/c}),0),o=i.column(2,{search:"applied"}).data().reduce((function(e,t){return s(e)+s(t)}),0),l=i.column(1,{search:"applied"}).data().reduce((function(e,t){return s(e)+s(t)}),0);B(i.column(3).footer()).html(r.toFixed(1)+"%"),B(i.column(2).footer()).html(o.toLocaleString("it")),B(i.column(1).footer()).html(l.toLocaleString("it")),B(i.column(0).footer()).html("Totale")}});(null===e||void 0===e||null===(a=e.selected)||void 0===a?void 0:a.area)?n.search(e.selected.area).draw():n.search(" ").draw()})),Object(n.jsx)("div",{id:"datatable",children:Object(n.jsx)("table",{className:"table h-100 table-borderless compact table-hover",cellSpacing:"0",width:"100%",style:{paddingBottom:6}})})},W=a(49),H=a.n(W),J=function(e){var t;return Object(n.jsxs)("div",{className:"h-100 w-100 mt-2 mb-3 max-width-total",children:[Object(n.jsx)("div",{className:"timestamp mx-auto",children:Object(n.jsxs)("h6",{className:"text-center pb-4",children:["Dati aggiornati al:"," ",e.summary.timestamp&&H()(e.summary.timestamp).format("DD-MM-YYYY HH:mm")]})}),Object(n.jsxs)("div",{className:"d-flex flex-column justify-content-center",children:[Object(n.jsxs)("div",{className:"d-flex justify-content-center align-items-baseline",children:[Object(n.jsx)("img",{src:"meds.png",alt:"meds",className:"pl-4 pr-5"})," ",Object(n.jsx)("h1",{className:"pl-5 mt-4 font-weight-light",children:null===(t=e.summary.tot)||void 0===t?void 0:t.toLocaleString("it")})]}),Object(n.jsx)("span",{className:"border-top mb-2"}),Object(n.jsxs)("div",{className:"d-flex justify-content-center",children:[Object(n.jsx)("img",{src:"logo.png",alt:"fiore",height:"30"}),Object(n.jsx)("img",{src:"logo.png",alt:"fiore",height:"30"}),Object(n.jsx)("img",{src:"logo.png",alt:"fiore",height:"30",className:"pr-5"})," ",Object(n.jsx)("h6",{className:"pl-5",children:"Totale vaccinazioni"})]})]})]})},Z="https://raw.githubusercontent.com/italia/covid19-opendata-vaccini/master/dati",$="".concat(Z,"/somministrazioni-vaccini-summary-latest.json"),q="".concat(Z,"/somministrazioni-vaccini-latest.json"),K="".concat(Z,"/consegne-vaccini-latest.json"),Q="".concat(Z,"/vaccini-summary-latest.json"),X="".concat(Z,"/punti-somministrazione-latest.json"),ee="".concat(Z,"/anagrafica-vaccini-summary-latest.json"),te="".concat(Z,"/punti-somministrazione-latest.json"),ae="".concat(Z,"/last-update-dataset.json"),ne=function(e){var t=e.dataSommVaxSummary.data.filter(L).reduce(v("totale"),0),a=e.dataSommVaxDetail.data.map(z),n=e.dataVaxSummary.data.map(z),c=e.dataProfileSummary.data,i=[{name:"Operatori Sanitari e Sociosanitari",code:"cat_oss",total:c.reduce(v("categoria_operatori_sanitari_sociosanitari"),0)},{name:"Ospiti Strutture Residenziali",code:"cat_rsa",total:c.reduce(v("categoria_ospiti_rsa"),0)},{name:"Personale non sanitario",code:"cat_pns",total:c.reduce(v("categoria_personale_non_sanitario"),0)}],s=e.dataSommVaxSummary.data.reduce(S("area"),{}),r={};Object.keys(s).map((function(e){return r[e]=[{name:"Operatori Sanitari e Sociosanitari",code:"cat_oss",total:s[e].reduce(v("categoria_operatori_sanitari_sociosanitari"),0)},{name:"Ospiti Strutture Residenziali",code:"cat_rsa",total:s[e].reduce(v("categoria_ospiti_rsa"),0)},{name:"Personale non sanitario",code:"cat_pns",total:s[e].reduce(v("categoria_personale_non_sanitario"),0)}],r})),n.forEach((function(e){e.byCategory=r[e.code].reduce(S("code"),{})}));var o=e.dataVaxLocations.data.map(z),l=0,d=x()(e.dataVaxLocations.data.map(z)).groupBy("area").map((function(e,t){return l=l>e.length?l:e.length,{area:t,locations:e.length}})).value(),j={gen_m:c.reduce(v("sesso_maschile"),0),gen_f:c.reduce(v("sesso_femminile"),0)};return{timestamp:e.dataLastUpdate.ultimo_aggiornamento,tot:t,deliverySummary:n,categoriesAndAges:c,categories:i,categoriesByRegions:r,locations:o,gender:j,dataSomeVaxDetail:a,locationsByRegion:d,maxNumberOfLocations:l}},ce=function(){var e=Object(h.a)(m.a.mark((function e(){var t,a,n,c,i,s,r,l,d,j,u,h,p,b,g,x;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch($);case 2:return t=e.sent,e.next=5,fetch(q);case 5:return a=e.sent,e.next=8,fetch(K);case 8:return n=e.sent,e.next=11,fetch(Q);case 11:return c=e.sent,e.next=14,fetch(ee);case 14:return i=e.sent,e.next=17,fetch(te);case 17:return s=e.sent,e.next=20,fetch(X);case 20:return r=e.sent,e.next=23,fetch(ae);case 23:return l=e.sent,e.next=26,t.json();case 26:return d=e.sent,e.next=29,a.json();case 29:return j=e.sent,e.next=32,n.json();case 32:return u=e.sent,e.next=35,c.json();case 35:return h=e.sent,e.next=38,i.json();case 38:return p=e.sent,e.next=41,s.json();case 41:return b=e.sent,e.next=44,r.json();case 44:return g=e.sent,e.next=47,l.json();case 47:return x=e.sent,e.abrupt("return",Object(o.a)({},ne({dataSommVaxSummary:d,dataSommVaxDetail:j,dataDeliveryVaxDetail:u,dataVaxSummary:h,dataProfileSummary:p,dataPointsSommSummary:b,dataLastUpdate:x,dataVaxLocations:g})));case 49:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ie=function(e){var t=+e.width,a=+e.height,i=Object(c.useRef)(),s=Object(c.useRef)(),r=Object(c.useState)(null),o=Object(l.a)(r,2),d=o[0],j=o[1];Object(c.useEffect)((function(){p.g(s.current).selectAll("svg").remove(),m()}));var u=function(e){var t=p.g(e.node().parentNode),a=parseInt(e.style("width"),10),n=parseInt(e.style("height"),10),c=a/n;function i(){var a=parseInt(t.style("width"));e.attr("width",a),e.attr("height",Math.round(a/c))}e.attr("viewBox","0 0 ".concat(a," ").concat(n)).attr("preserveAspectRatio","xMinYMid").call(i),p.g(window).on("resize."+t.attr("id"),i)};var m=function(){var n=(null===e||void 0===e?void 0:e.data)||[],c=(null===n||void 0===n?void 0:n.reduce(O(e.property.yprop),0))||0,i=p.g(s.current).append("svg").attr("width",t).attr("height",a),r=50,o=50,l=p.e().padding(.2),m=p.f().domain([0,c]);m.range([a,0]),l.range([0,t]).domain(n.map((function(t){return t[e.property.xprop]}))),i.attr("width",t+2*o).attr("height",a+2*r).call(u).attr("id","svg-bar"),i.append("text").attr("x",t/2+o).attr("y",r/2).attr("class","title").attr("text-anchor","middle").attr(e.title),i.append("text").attr("x",-a/2-r).attr("y",o/2.4).attr("transform","rotate(-90)").attr("class","title").text(e.ytitle);var h=i.append("g").attr("transform","translate(".concat(o,",").concat(r,")"));h.append("g").attr("class","axis").attr("transform","translate(0,".concat(a,")")).style("font-size",20).call(p.a(l));var b=h.selectAll().data(n);b.enter().append("rect").on("click",(function(t,a){var n;d===(n=a)?(e.handleRectClick(null),j(null)):(e.handleRectClick(n),j(n))})).attr("id",(function(e){return null===e||void 0===e?void 0:e.fascia_anagrafica})).attr("opacity",(function(t){var a;return(null===e||void 0===e||null===(a=e.selected)||void 0===a?void 0:a.fascia_anagrafica)===(null===t||void 0===t?void 0:t.fascia_anagrafica)?1:(null===e||void 0===e?void 0:e.selected)?.3:1})).attr("class","bar").attr("x",(function(t){return l(t[e.property.xprop])})).attr("y",(function(t){return m(t[e.property.yprop])})).attr("height",(function(t){return a-m(t[e.property.yprop])})).attr("width",l.bandwidth()).append("title").attr("x",(function(t){return l(t[e.property.xprop])})).attr("y",(function(t){return m(t[e.property.yprop])})).text((function(t){return"Fascia ".concat(t[e.property.xprop]," totale: ").concat(t[e.property.yprop])})),b.enter().append("text").attr("class","bartext").attr("text-anchor","middle").attr("fill","white").attr("x",(function(t){return l(t[e.property.xprop])+35})).attr("y",(function(t){return a-m(t[e.property.yprop])>=0?m(t[e.property.yprop])-10:m(t[e.property.yprop])})).text((function(t){return t[e.property.yprop].toLocaleString("it")})),b.exit().remove()};return Object(n.jsx)("div",{ref:s,className:"chart svg-container",children:Object(n.jsx)("svg",{ref:i,className:"svg-content-responsive"})})},se=function(e){var t=+e.width,a=+e.height,i=Object(c.useRef)(),s=Object(c.useRef)(),r=Object(c.useState)(null),o=Object(l.a)(r,2),d=o[0],j=o[1];Object(c.useEffect)((function(){p.g(s.current).selectAll("svg").remove(),m()}));var u=function(e){var t=p.g(e.node().parentNode),a=parseInt(e.style("width"),10),n=parseInt(e.style("height"),10),c=a/n;function i(){var a=parseInt(t.style("width"));e.attr("width",a),e.attr("height",Math.round(a/c))}e.attr("viewBox","0 0 ".concat(a," ").concat(n)).attr("preserveAspectRatio","xMinYMid").call(i),p.g(window).on("resize."+t.attr("id"),i)};var m=function(){var n=(null===e||void 0===e?void 0:e.data)||[],c=(null===n||void 0===n?void 0:n.reduce(O(e.property.yprop),0))||0,i=p.g(s.current).append("svg").attr("width",t).attr("height",a),r=50,o=170,l=p.f().domain([0,c]).range([0,t-20]),m=p.e().padding(.4).range([0,a]).domain(n.map((function(t){return t[e.property.xprop]})));i.attr("width",t+2*o).attr("height",a+2*r).call(u).attr("id","svg-horizontal-bar"),i.append("text").attr("x",t/2+o).attr("y",r/2).attr("class","hb-title").attr("text-anchor","middle").attr(e.title);var h=i.append("g").attr("transform","translate(".concat(o,",").concat(r,")"));h.append("g").attr("class","hb-axis").call(p.b(m)).style("font-size","18px").attr("transform","translate(85,0)");var b=h.selectAll().data(n);b.enter().append("rect").on("click",(function(t,a){var n;d===(n=a)?(e.handleRectClick(null),j(null)):(e.handleRectClick(n),j(n))})).attr("opacity",(function(t){return(null===e||void 0===e?void 0:e.selectedCodeCategory)===t.code?1:(null===e||void 0===e?void 0:e.selectedCodeCategory)?.3:1})).attr("class","hb-bar").attr("x",l(0)+95).attr("y",(function(t){return m(t[e.property.xprop])})).attr("width",(function(t){return l(t[e.property.yprop])})).attr("height",m.bandwidth()).append("hb-title").attr("x",(function(t){return l(t[e.property.xprop])})).attr("y",(function(t){return m(t[e.property.yprop])})).text((function(t){return"Fascia ".concat(t[e.property.xprop]," totale: ").concat(t[e.property.yprop])})),b.enter().append("text").attr("class","hb-bartext").attr("text-anchor","middle").attr("fill","white").attr("x",(function(t){return l(t[e.property.yprop])+135})).attr("y",(function(t){return a-m(t[e.property.xprop])>=0?m(t[e.property.xprop])+30:m(t[e.property.xprop])})).text((function(t){return t[e.property.yprop].toLocaleString("it")})),b.exit().remove()};return Object(n.jsx)("div",{ref:s,className:"chart svg-container",children:Object(n.jsx)("svg",{ref:i,className:"svg-content-responsive"})})};var re=function(){var e,t,a,i,s=Object(c.useState)({}),r=Object(l.a)(s,2),u=r[0],m=r[1],h=Object(c.useState)(null),p=Object(l.a)(h,2),b=p[0],x=p[1],f=Object(c.useState)({}),v=Object(l.a)(f,2),O=v[0],y=v[1],S=Object(c.useState)([]),C=Object(l.a)(S,2),k=C[0],L=C[1],z=Object(c.useState)(""),F=Object(l.a)(z,2),B=F[0],M=F[1],P=Object(c.useState)(null),I=Object(l.a)(P,2),T=I[0],G=I[1],W=Object(c.useState)(null),H=Object(l.a)(W,2),Z=H[0],$=H[1],q=Object(c.useState)(null),K=Object(l.a)(q,2),Q=K[0],X=K[1],ee=Object(c.useState)([]),te=Object(l.a)(ee,2),ae=te[0],ne=te[1],re=Object(c.useState)(null),oe=Object(l.a)(re,2),le=oe[0],de=oe[1],je=Object(c.useState)(null),ue=Object(l.a)(je,2),me=ue[0],he=ue[1],pe=Object(c.useState)(null),be=Object(l.a)(pe,2),ge=be[0],xe=be[1],fe=Object(c.useState)(0),ve=Object(l.a)(fe,2),Oe=ve[0],ye=ve[1],Ne=Object(c.useState)(0),we=Object(l.a)(Ne,2),_e=we[0],Se=we[1],Ce=Object(c.useState)(0),ke=Object(l.a)(Ce,2),Le=ke[0],ze=ke[1],Fe=Object(c.useState)(null),Re=Object(l.a)(Fe,2),Ae=Re[0],De=Re[1],Ve=function(e){if(document.getElementById(e)&&e){var t=new MouseEvent("click",{bubbles:!0,cancelable:!0});document.getElementById(e).dispatchEvent(t)}},Ee=function(){Ve(null===b||void 0===b?void 0:b.area),Ve(null===Q||void 0===Q?void 0:Q.fascia_anagrafica),x(null),ne(u.categories),he(null),$(null),xe(null),M(null),De(null)};function Be(e){X(e),y({gen_m:null===e||void 0===e?void 0:e.sesso_maschile,gen_f:null===e||void 0===e?void 0:e.sesso_femminile})}function Me(e){var t=u.dataSomeVaxDetail.filter((function(t){return t.fascia_anagrafica.trim()===e.fascia_anagrafica.trim()})),a=g.mapValues(g.groupBy(t,"area"),(function(e){return g.sum(e.map((function(e){return g.sum([e.sesso_maschile,e.sesso_femminile])})))})),n=u.deliverySummary;n=n.map((function(e){var t=Object(g.omit)(e,["dosi_somministrate","percentuale_somministrazione","ultimo_aggiornamento"]),n={dosi_somministrate:a[e.area]},c={percentuale_somministrazione:(n.dosi_somministrate/t.dosi_consegnate*100).toFixed(1)};return Object(o.a)(Object(o.a)(Object(o.a)({},t),n),c)})),de(n)}return Object(c.useEffect)((function(){ce().then((function(e){m(e),ne(e.categories),L(e.categoriesAndAges),y(e.gender),de(null)})).finally((function(){!function(){var e=document.getElementById("loader-custom");e&&(e.className=e.className.includes("d-none")?e.className:e.className+" d-none")}()}))}),[]),Object(c.useEffect)((function(){var e,t=0,a=0;(me&&he(null),me)||(null===u||void 0===u||null===(e=u.deliverySummary)||void 0===e||e.forEach((function(e){Object.keys(e.byCategory).forEach((function(n){me?me&&n===me&&(t=t+(e.byCategory[n].length&&e.byCategory[n][0].total)||0,a=(e.byCategory[n].length&&e.byCategory[n][0].total)>a?e.byCategory[n].length&&e.byCategory[n][0].total:a):(t=t+(e.byCategory[n].length&&e.byCategory[n][0].total)||0,a=(e.byCategory[n].length&&e.byCategory[n][0].total)>a?e.byCategory[n].length&&e.byCategory[n][0].total:a)}))})),Se(a),ye(t))}),[me,u,Oe]),Object(n.jsxs)("div",{children:[Object(n.jsx)(d,{}),Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)("div",{className:"row",children:Object(n.jsx)("div",{className:"col-12 d-flex justify-content-center",children:Object(n.jsx)(J,{className:"mb-3",summary:Object(o.a)({},u)})})}),Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("div",{className:"col-12 col-md-6 font-25",children:Object(n.jsx)(E,{classes:"bg-primary text-white",text:"Il 27 dicembre sono state consegnate 9.750 dosi di vaccino, interamente somministrate."})}),Object(n.jsx)("div",{className:"col-12 col-md-6 font-25",children:Object(n.jsx)(E,{classes:"bg-primary text-white",text:"Dal 30 Dicembre al 1\xb0 Gennaio sono state consegnate 469.950 dosi di vaccino."})}),Object(n.jsx)("div",{className:"col-12",children:Object(n.jsx)("div",{className:"text-center font-22",children:Object(n.jsx)(E,{classes:"text-black text-uppercase font-weight-bold",text:"Le somministrazioni delle 469.950 dosi di vaccino su tutto il territorio sono iniziate il 31 dicembre"})})})]}),Object(n.jsx)("div",{className:"row",children:Object(n.jsx)("div",{className:"col-12 d-flex justify-content-end",children:Object(n.jsx)("img",{alt:"reset",src:"reset.png",onClick:Ee})})}),Object(n.jsxs)("div",{className:"row",style:{backgroundColor:"#F8FBFE"},children:[Object(n.jsxs)("div",{className:"col-12 col-lg-5 h-100 order-md-2 order-lg-1 ",children:[Object(n.jsx)("div",{className:"container-info d-none d-sm-none d-md-flex d-lg-flex",children:Object(n.jsx)("span",{"data-toggle":"tooltip",title:"% somministrazioni su dosi consegnate",className:"circle-info",children:"i"})}),Object(n.jsx)(U,{summaryFilter:le,summary:Object(o.a)({},u),selected:b,className:"mr-5 h-100"})]}),Object(n.jsxs)("div",{className:"col-12 col-lg-7 order-md-1 order-lg-2",children:[Object(n.jsx)("div",{className:"p-4 position-relative d-lg-none",children:Object(n.jsxs)("div",{className:"w-100 h-100 d-flex justify-content-start pr-5",children:[Object(n.jsx)("img",{src:"logo.png",width:"35",height:"35",alt:"Logo"}),Object(n.jsxs)("h5",{className:"pl-3 pl-sm-1",children:["Distribuzione vaccinazioni",Object(n.jsx)("br",{})," rispetto alle consegne"]})]})}),Object(n.jsx)("div",{className:"p-4 position-relative d-none d-lg-block",style:{left:"300px",top:"190px"},children:Object(n.jsxs)("div",{className:"w-100 h-100 d-flex justify-content-start pr-5",children:[Object(n.jsx)("img",{src:"logo.png",width:"35",height:"35",alt:"Logo"}),Object(n.jsxs)("h5",{className:"pl-3 pl-sm-1",children:["Distribuzione vaccinazioni",Object(n.jsx)("br",{})," rispetto alle consegne"]})]})}),Object(n.jsx)(A,{summaryFilter:le,summary:Object(o.a)({},u),selected:T,handleCountryClick:function(e){var t,a=u.deliverySummary[e];if(x(Object(o.a)({},a)),X(null),de(null),G(a),e||0===e){var n=u.dataSomeVaxDetail.filter((function(e){return e.area===a.area}));L(N(n)),y((t=N(n),{gen_m:_(w(t,"sesso_maschile")),gen_f:_(w(t,"sesso_femminile"))}))}else L(u.categoriesAndAges),y(u.gender)},className:"ml-5 w-100 h-100"}),Object(n.jsx)("div",{className:"p-4 position-relative",children:Object(n.jsxs)("div",{className:"text-black w-100",children:[Object(n.jsxs)("div",{className:"w-100 h-100 d-flex justify-content-start ",children:[Object(n.jsx)("img",{src:"logo.png",width:"45",height:"45",alt:"Logo",className:"mt-3"}),Object(n.jsx)("span",{className:"font-50 pl-3",children:g.sum([null===O||void 0===O?void 0:O.gen_m,null===O||void 0===O?void 0:O.gen_f])?g.sum([null===O||void 0===O?void 0:O.gen_m,null===O||void 0===O?void 0:O.gen_f]).toLocaleString("it"):0})]}),Object(n.jsx)("div",{className:"w-100  h-100 d-flex justify-content-start",children:Object(n.jsx)("h5",{children:"Totale vaccinazioni"})})]})})]})]}),Object(n.jsxs)("div",{className:"row position-powerbi",style:{backgroundColor:"#F8FBFE"},children:[Object(n.jsx)("div",{className:"col-12 col-md-6 d-flex align-items-end testo-info-campania",children:"Il dato della Campania evidenzia la prevista somministrazione della sesta dose, il che potr\xe0 avvenire anche nelle altre regioni."}),Object(n.jsxs)("div",{className:"col-12 col-md-6  position-relative",children:[Object(n.jsx)("div",{className:"bg-gradient-bar"}),Object(n.jsxs)("div",{className:"row",children:[Object(n.jsxs)("div",{className:"col-6 d-flex align-items-baseline",children:[Object(n.jsx)("img",{src:"user_f.png",alt:"users",width:"75px"}),Object(n.jsx)("span",{className:"text-center font-weight-light text-white",children:Object(n.jsx)("h3",{className:"total_gender",children:null===O||void 0===O||null===(e=O.gen_f)||void 0===e?void 0:e.toLocaleString("it")})})]}),Object(n.jsxs)("div",{className:"col-6  d-flex align-items-baseline",children:[Object(n.jsx)("img",{src:"user_m.png",alt:"users",width:"75px"}),Object(n.jsx)("span",{className:"text-center font-weight-light text-white",children:Object(n.jsx)("h3",{className:"total_gender",children:null===O||void 0===O||null===(t=O.gen_m)||void 0===t?void 0:t.toLocaleString("it")})})]})]})]}),Object(n.jsx)("div",{className:"col-12 col-md-5",style:{backgroundColor:"#17324D"},children:Object(n.jsxs)("div",{className:"p-4 position-relative",children:[Object(n.jsx)("div",{style:{height:100},children:Object(n.jsx)("img",{src:"group_person.svg",alt:"Logo",className:"img-fluid"})}),Object(n.jsxs)("div",{className:"text-white w-100",children:[Object(n.jsx)("div",{className:"w-100 h-100 d-flex justify-content-end",children:Object(n.jsx)("img",{src:"logo.png",width:"40",height:"40",alt:"Logo"})}),Object(n.jsx)("div",{className:"w-100  h-100 d-flex justify-content-end text-right",children:Object(n.jsxs)("h3",{children:["Vaccinazioni",Object(n.jsx)("br",{})," per fasce di et\xe0"]})})]})]})}),Object(n.jsx)("div",{className:"col-12  col-md-7",style:{backgroundColor:"#17324D"},children:Object(n.jsx)(ie,{title:"",xtitle:"Fascia d'et\xe0",ytitle:"",width:"800",handleRectClick:function(e){var t=!!e,a=!!b;if(t||(L(u.categoriesAndAges),y(u.gender),de(null),X(null),x(null)),t&&a){Ee();var n=null===u||void 0===u?void 0:u.categoriesAndAges.filter((function(t){return(null===t||void 0===t?void 0:t.fascia_anagrafica)===(null===e||void 0===e?void 0:e.fascia_anagrafica)}));Me(e),Be(n[0])}t&&!a&&(Me(e),Be(e))},height:"300",selected:Q,property:{xprop:"fascia_anagrafica",yprop:"totale"},data:k})})]}),Object(n.jsxs)("div",{className:"row ",children:[Object(n.jsxs)("div",{className:"col-12  d-flex justify-content-center align-items-center p-5",style:{backgroundColor:"#F4F9FD"},children:[Object(n.jsx)("img",{src:"logo.png",width:"86",height:"86",alt:"Logo",className:"img-fluid",style:{zIndex:10}}),Object(n.jsx)("h3",{className:"text-center",children:"Vaccinazioni per categoria"})]}),Object(n.jsxs)("div",{className:"col-12 col-md-12 h-100  ",children:[Object(n.jsx)("div",{className:"mb-5  d-lg-none ",style:{position:"relative",background:"#013366"},children:Object(n.jsxs)("div",{className:"text-white w-100",children:[Object(n.jsx)("div",{className:"w-100  h-100 d-flex justify-content-start pt-5 pl-4",children:Object(n.jsxs)("h5",{children:["Totale",Object(n.jsx)("br",{}),"vaccinazioni"]})}),Object(n.jsx)("div",{className:"w-100  h-100 d-flex justify-content-start pl-4",children:Object(n.jsx)("p",{className:"numeri_box",children:me||Z?null===Oe||void 0===Oe?void 0:Oe.toLocaleString("it"):null===(a=u.tot)||void 0===a?void 0:a.toLocaleString("it")})}),Object(n.jsx)("div",{className:"col-12 d-flex justify-content-end  pb-2",children:Object(n.jsx)("img",{alt:"reset-plot2",src:"reset_white.png",onClick:Ee,height:35})})]})}),Object(n.jsx)("div",{className:"col-3 col-md-3 h-100 d-none d-lg-block",children:Object(n.jsx)("div",{style:{position:"relative",background:"#17324D",top:-90,left:105},children:Object(n.jsxs)("div",{className:"text-white w-100",children:[Object(n.jsx)("div",{className:"w-100  h-100 d-flex justify-content-start pt-3 pl-4",children:Object(n.jsxs)("h5",{children:["Totale",Object(n.jsx)("br",{}),"vaccinazioni"]})}),Object(n.jsx)("div",{className:"w-100  h-100 d-flex justify-content-start pl-4",children:Object(n.jsx)("p",{className:"numeri_box",children:me||Z?null===Oe||void 0===Oe?void 0:Oe.toLocaleString("it"):null===(i=u.tot)||void 0===i?void 0:i.toLocaleString("it")})}),Object(n.jsx)("div",{className:"col-12 d-flex justify-content-end  pb-2",children:Object(n.jsx)("img",{alt:"Reset",src:"reset_white.png",onClick:Ee,height:35})})]})})})]}),Object(n.jsx)("div",{className:"col-12 col-md-6 h-100",children:Object(n.jsx)(se,{title:"",xtitle:"Vaccinazioni per categoria",handleRectClick:function(e){he(e?null===e||void 0===e?void 0:e.code:null)},ytitle:"",width:"220",height:"260",property:{xprop:"name",yprop:"total"},data:(null===ae||void 0===ae?void 0:ae.slice())||[],selectedCodeCategory:me})}),Object(n.jsxs)("div",{className:"col-12 col-md-6 h-100",children:[Object(n.jsx)("div",{className:"p-4 position-relative d-lg-none",children:Object(n.jsxs)("div",{className:"w-100 h-100 d-flex justify-content-start pr-5",children:[Object(n.jsx)("img",{src:"logo.png",width:"35",height:"35",alt:"Logo"}),Object(n.jsxs)("h5",{className:"pl-3 pl-sm-1",children:["Vaccinazioni",Object(n.jsx)("br",{})," per regione"]})]})}),Object(n.jsx)("div",{className:"p-4 position-relative d-none d-lg-block",style:{left:"300px",top:"190px"},children:Object(n.jsxs)("div",{className:"w-100 h-100 d-flex justify-content-start pr-5",children:[Object(n.jsx)("img",{src:"logo.png",width:"35",height:"35",alt:"Logo"}),Object(n.jsxs)("h5",{className:"pl-3 pl-sm-1",children:["Vaccinazioni",Object(n.jsx)("br",{})," per regione"]})]})}),Object(n.jsx)(D,{summary:Object(o.a)({},u),selected:Z,handleCountryClick:function(e){var t;he(null);var a=null===(t=u.deliverySummary[e])||void 0===t?void 0:t.area,n=R[a],c=u.categoriesByRegions[n],i=u.deliverySummary[e];$(i),ye(e?i.dosi_somministrate:u.tot),ne(e?(null===c||void 0===c?void 0:c.slice())||[]:u.categories)},maxByCategory:_e,selectedCodeCategory:me,setCategoryRegionSelect:xe,categoryRegionSelect:ge,className:"w-100 h-100"})]})]}),Object(n.jsxs)("div",{className:"row ",children:[Object(n.jsxs)("div",{className:"col-12 d-flex justify-content-center align-items-center p-5",style:{backgroundColor:"#F4F9FD"},children:[Object(n.jsx)("img",{src:"logo.png",width:"86",height:"86",alt:"Logo",className:"img-fluid",style:{zIndex:10}}),Object(n.jsx)("h3",{className:"text-center",children:"Punti di somministrazione per regione"})]}),Object(n.jsxs)("div",{className:"col-12 col-md-12 h-100 p-0",children:[Object(n.jsx)("div",{className:"mb-5  d-lg-none ",style:{position:"relative",background:"#013366"},children:Object(n.jsxs)("div",{className:"text-white w-100",children:[Object(n.jsx)("div",{className:"w-100  h-100 d-flex justify-content-start pt-5 pl-4",children:Object(n.jsx)("h5",{children:"Punti di somministrazione per regione"})}),Object(n.jsx)("div",{className:"w-100  h-100 d-flex justify-content-start pl-4",children:Object(n.jsx)("p",{className:"numeri_box",children:Le})}),Object(n.jsx)("div",{className:"col-12 d-flex justify-content-end  pb-2",children:Object(n.jsx)("img",{alt:"reset-plot",src:"reset_white.png",onClick:Ee,height:35})})]})}),Object(n.jsx)("div",{className:"col-3 col-md-3 h-100 d-none d-lg-block",children:Object(n.jsx)("div",{style:{position:"relative",background:"#17324D",top:-90,left:40},children:Object(n.jsxs)("div",{className:"text-white w-100",children:[Object(n.jsx)("div",{className:"w-100  h-100 d-flex justify-content-start pt-5 pl-4",children:Object(n.jsxs)("h5",{children:["Totale punti di",Object(n.jsx)("br",{}),"somministrazione"]})}),Object(n.jsx)("div",{className:"w-100  h-100 d-flex justify-content-start pl-4",children:Object(n.jsx)("p",{className:"numeri_box",children:Le})}),Object(n.jsx)("div",{className:"col-12 d-flex justify-content-end  pb-2",children:Object(n.jsx)("img",{alt:"reset-white",src:"reset_white.png",onClick:Ee,height:35})})]})})})]}),Object(n.jsxs)("div",{className:"col-12 col-md-6 pt-5",children:[Object(n.jsx)("div",{className:"p-4 position-relative d-lg-none",children:Object(n.jsxs)("div",{className:"w-100 h-100 d-flex justify-content-start pr-5",children:[Object(n.jsx)("img",{src:"logo.png",width:"35",height:"35",alt:"Logo"}),Object(n.jsxs)("h5",{className:"pl-3 pl-sm-1",children:["Punti di",Object(n.jsx)("br",{})," somministrazione ",Object(n.jsx)("br",{})," per regione"]})]})}),Object(n.jsx)("div",{className:"p-4 position-relative d-none d-lg-block",style:{left:"300px",top:"190px"},children:Object(n.jsxs)("div",{className:"w-100 h-100 d-flex justify-content-start pr-5",children:[Object(n.jsx)("img",{src:"logo.png",width:"35",height:"35",alt:"Logo"}),Object(n.jsxs)("h5",{className:"pl-3 pl-sm-1",children:["Punti di",Object(n.jsx)("br",{})," somministrazione ",Object(n.jsx)("br",{})," per regione"]})]})}),Object(n.jsx)(V,{summary:Object(o.a)({},u),handleCountryClick:function(e){M(e)},className:"w-100 h-100",setLocationRegionSelect:De,locationRegionSelect:Ae})]}),Object(n.jsx)("div",{className:"col-12 col-md-6 pt-3 pl-3",children:Object(n.jsx)(Y,{summary:Object(o.a)({},u),selected:B,className:"mr-5 h-100",setLocationTableRef:ze})})]}),Object(n.jsx)("div",{className:"row",children:Object(n.jsxs)("div",{className:"col-12 text-center pt-5 pb-3",children:["I dati visualizzati sono disponibili all'indirizzo"," ",Object(n.jsx)("a",{href:"https://github.com/italia/covid19-opendata-vaccini",children:"https://github.com/italia/covid19-opendata-vaccini"})]})})]}),Object(n.jsx)(j,{})]})},oe=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,100)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,i=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),i(e),s(e)}))};r.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(re,{})}),document.getElementById("root")),oe()}},[[99,1,2]]]);
//# sourceMappingURL=main.2ff767c3.chunk.js.map